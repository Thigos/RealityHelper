<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reality Helper</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav>
        <ul>
            <li>
                <a href="#sec1">R</a>
            </li>
            <div class="separator">
                <div id="separator1_back"></div>
            </div>
            <li id="navbar_li_2">
                <a href="#sec2" class="material-symbols-rounded">
                    edit_note
                </a>
            </li>
            <div class="separator">
                <div id="separator2_back"></div>
            </div>
            <li id="navbar_li_3">
                <a href="#sec3" class="material-symbols-rounded">
                    explore
                </a>
            </li>
            <div class="separator">
                <div id="separator3_back"></div>
            </div>
            <li id="navbar_li_4">
                <a href="#sec4" class="material-symbols-rounded">
                    analytics
                </a>
            </li>
            <div class="separator">
                <div id="separator4_back"></div>
            </div>
            <li>
                <a href="#sec5" class="material-symbols-rounded" id="sentiment_span">
                    sentiment_satisfied
                </a>
            </li>
        </ul>
    </nav>

    <div class="message" id="msg_container">
        <p id="text_msg_user"></p>
    </div>

    <section id="sec1">
        <div class="light-top"><img src="img/light_top.png"></div>
        <div class="container-title">
            <h1>Reality Helper</h1>
            <span>Conectando Realidades</span>
        </div>

        <div class="information">
            <div class="box box-apresentacao-logo" style="width: 124px; height: 224px;">
                <span class="logo">R</span>
            </div>

            <div class="box box-horizontal-text" style="width: 269px; height: 131px;">
                <span class="text">Compartilhe a sua realidade</span>
            </div>
        </div>

        <div class="light-bottom"><img src="img/light_bottom.png"></div>
    </section>
    <section id="sec2">
        <div class="container-subtitle">
            <h1>Conte sua <br> Hist√≥ria</h1>
        </div>
        <div class="information">
            <div class="box box-escrita-logo" style="width: 124px; height: 224px;">
                <span class="logo">R</span>
            </div>

            <div class="box box-escrita-text" style="width: 353px; height: 444px;">
                <div class="escrita-container">
                    <div class="write-box">
                        <span class="title">Escreva Aqui</span>
                        <textarea 
                         class="txtArea-write" id="txtAreaStories"></textarea>
                    </div>
                    <!-- <button class="bt-add-wallpaper">Adicionar Wallpaper</button> -->
                    <button class="bt-enviar" id="btEnviar">Enviar</button>
                </div>
            </div>
        </div>
        <div class="light-bottom"><img src="img/light_bottom.png"></div>
    </section>
    <section id="sec3">
        <div class="container-subtitle">
            <h1>Explore<br> Realidades</h1>
        </div>
        <div class="information">
            <div class="box box-horizontal-text" style="width: 269px; height: 131px;">
                <span class="logo">R</span>
            </div>

            <div class="realitys-carousel" id="realitys-carousel">
                <span class="left-arrow material-symbols-rounded" id="bt_left_carousel">arrow_back_ios_new</span>
                
                <div class="realitys-container" id="realitys-container">
                </div>

                <span class="right-arrow material-symbols-rounded" id="bt_right_carousel">arrow_forward_ios</span>
            </div>
        </div>
        <div class="light-bottom"><img src="img/light_bottom.png"></div>
    </section>
    <section id="sec4">
        <div class="container-title">
            <h1>Palavras em Alta</h1>
        </div>

        <div class="information" style="height: 80%; align-items: center;">
            <table class="table-token">
                <tbody id="tb_analytics">
                    <tr>
                        <td>Token1</td>
                        <td>99x</td>
                    </tr>
    
                    <tr>
                        <td>Token2</td>
                        <td>99x</td>
                    </tr>
    
                    <tr>
                        <td>Token3</td>
                        <td>99x</td>
                    </tr>

                    <tr>
                        <td>Token4</td>
                        <td>99x</td>
                    </tr>

                    <tr>
                        <td>Token5</td>
                        <td>99x</td>
                    </tr>
                </tbody>
            </table>


            <div class="chart-container">
                <canvas id="chart-token"></canvas>
            </div>
        </div>
        
        <div class="light-bottom"><img src="img/light_bottom.png"></div>
    </section>
    <section id="sec5">
        <div class="container-title">
            <h1>Sentimentos dos Textos</h1>
        </div>

        <div class="information" style="height: 80%; align-items: center;">
            <table class="table-token">
                <tbody id="tb_analyticsSentiment">
                    <tr>
                        <td>Positivos</td>
                        <td>99x</td>
                    </tr>
    
                    <tr>
                        <td>Neutros</td>
                        <td>99x</td>
                    </tr>
    
                    <tr>
                        <td>Negativos</td>
                        <td>99x</td>
                    </tr>

                </tbody>
            </table>


            <div class="chart-container" style="width: 500px;">
                <canvas id="chart-sentiments"></canvas>
            </div>
        </div>
        
        <div class="light-bottom"><img src="img/light_bottom.png"></div>
    </section>
</body>
</html>
<script>
    const msgContainer = document.getElementById('msg_container');
    const textMsgUser = document.getElementById('text_msg_user');
    const btRightCarousel = document.getElementById('bt_right_carousel');
    const btLeftCarousel = document.getElementById('bt_left_carousel');
    const realitysContainer = document.getElementById('realitys-container');
    const realityCarousel = document.getElementById('realitys-carousel');
    const tbAnalytics = document.getElementById('tb_analytics');
    const tbAnalyticsSentiment = document.getElementById('tb_analyticsSentiment');
    const separator1Back = document.getElementById('separator1_back');
    const separator2Back = document.getElementById('separator2_back');
    const separator3Back = document.getElementById('separator3_back');
    const separator4Back = document.getElementById('separator4_back');
    const navbarLi2 = document.getElementById('navbar_li_2');
    const navbarLi3 = document.getElementById('navbar_li_3');
    const navbarLi4 = document.getElementById('navbar_li_4');
    const sentimentSpan = document.getElementById('sentiment_span');
    const windowHeight = window.innerHeight-27;
    const sentiments = ['sentiment_satisfied', 'sentiment_dissatisfied', 'sentiment_neutral', 'sentiment_excited', 'sentiment_stressed', 'sentiment_calm', 'sentiment_sad', 'sentiment_content', 'sentiment_frustrated', 'sentiment_worried'];

    var count = 0;
    setInterval(()=>{
        sentimentSpan.innerText = sentiments[count];
        count < sentiments.length-1 ? count++ : count = 0;
    }, 300)

    document.onscroll = ()=>{
        if(window.scrollY <= windowHeight * 0.8){
            //Separator1
            var altura = (window.scrollY * 25)/windowHeight;
            separator1Back.style.height = altura + 'px';
            separator2Back.style.height = '0px';
            navbarLi2.className = '';
            navbarLi2.style.backgroundColor = '';
        }else if(window.scrollY <= (windowHeight * 1.8)){
            //Separator2
            navbarLi2.className = 'active';
            navbarLi2.style.backgroundColor = '#80FE75';
            var altura = ((window.scrollY - windowHeight) * 25)/windowHeight;
            separator1Back.style.height = '25px';
            separator2Back.style.height = altura + 'px';
            separator3Back.style.height = '0px';
            navbarLi3.className = '';
            navbarLi3.style.backgroundColor = '';
            
        }else if(window.scrollY <= (windowHeight * 2.8)){
            //Separator2
            navbarLi3.className = 'active';
            navbarLi3.style.backgroundColor = '#7875FE';
            var altura = ((window.scrollY- windowHeight * 2) * 25)/windowHeight;
            separator2Back.style.height = '25px';
            separator3Back.style.height = altura + 'px';
            separator4Back.style.height = '0px';
            navbarLi4.className = '';
            navbarLi4.style.background = '';
        }else if(window.scrollY <= (windowHeight * 3.8)){
            navbarLi4.className = 'active';
            navbarLi4.style.background = 'linear-gradient(180deg, rgb(255, 85, 105), rgb(120, 117, 254))';
            var altura = ((window.scrollY- windowHeight * 3) * 25)/windowHeight;
            separator3Back.style.height = '25px';
            separator4Back.style.height = altura + 'px';
        }else{
            separator4Back.style.height = '25px';
        }
    }

    const genBorderRadius = () =>{
        return Math.floor(Math.random() * (50 - 40)) + 40;
    }

    setInterval(()=>{
        let style = `${genBorderRadius()}%`;
        realityCarousel.style.borderRadius = style;
        realitysContainer.style.borderRadius = style;
    }, 800);

    window.addEventListener('load', function() {
        var lightsBottom = document.getElementsByClassName('light-bottom');
        

        [].forEach.call(lightsBottom, function(element) {
            const img = element.getElementsByTagName('img')[0];
            var imgHeight = img.offsetHeight;

            element.style.bottom = -(imgHeight/2) + 'px';
        });
        
    });

    const show_msg = (text)=>{
        textMsgUser.innerText = text;

        msgContainer.style.right = '30px';

        setTimeout(()=>{
            msgContainer.style.right = '-25vw';
        }, 4000);
    }

    
    btRightCarousel.onclick = ()=>{
        const columnsCarousel = document.getElementsByClassName('column');
        var quantColumns = columnsCarousel.length-1;

        if(columnsCarousel[quantColumns].style.left != '0%'){
            for (let i = 0; i <= quantColumns; i++) {
                var originalLeft = Number(columnsCarousel[i].style.left.replace('%',''));
                columnsCarousel[i].style.left = (originalLeft-100) + '%';
            }
        }
    }

    btLeftCarousel.onclick = ()=>{
        const columnsCarousel = document.getElementsByClassName('column');
        var quantColumns = columnsCarousel.length-1;

        if(columnsCarousel[0].style.left != '0%'){
            for (let i = 0; i <= quantColumns; i++) {
                var originalLeft = Number(columnsCarousel[i].style.left.replace('%',''));
                columnsCarousel[i].style.left = (originalLeft+100) + '%';
            }
        }
    }

</script>
<script src="js/analytics.js"></script>
<script src="js/DataLoader.js"></script>
<script src="js/requests.js"></script>